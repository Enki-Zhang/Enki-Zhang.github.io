---
title: 秋招面试记录
top: false
cover: false
toc: true
mathjax: true
date: 2023-08-25 19:31:29
password:
summary:
tags:
categories:
---

## 面试总结

面试过程中如何进行引导
https://zhuanlan.zhihu.com/p/592682805

## 各个视频面试

飞书面试 鼠标移出飞书面试官会得到提示

## 连连支付

8-25

- 接口响应慢怎么解决

  1. 排查数据库问题，是否是存在慢查询，操作数据库的线程处于等待状态，导致变慢，此时也可能会出现 OOM 问题，是否索引失效；
  2. 网络连接是否正常，WEB 应用：可通过前端浏览器，开发者工具，network 查看前端耗时较长的接口，逐层定位
  3. 业务中是否有多层 if-else 嵌套或者循环嵌套

- 追问:explain 语句各个字段意思（如何查看执行计划）；如何查看索引失效
  在 select 语句之前添加 explain 会返回语句的执行计划。执行计划中的 key 字段显示了所使用的索引。

---

- 联合索引失效的场景 查询 a=1 c=2 b=2 这样的查询顺序会失效吗
  不会失效，查询优化器会自动优化
  原因：
  `alter table `test` add index search(a,b,c,d)`建立联合索引 a b c d
  联合索引遵循最左匹配原则，mysql 会一直向右匹配直到遇到范围查询(>、<、between、like)就停止匹配，当 a>2 时即使 a 为最左匹配同样不能使用索引，当查询 b=2 c=2 时候未使用最左匹配 不能使用索引。其中使用=和 in 时 abcd 的索引顺序和乱序，查询优化器会自动优化可识别的形态

  当建立一个联合索引 (a,b,c,d) 时，查询条件 a, b, c, d 的顺序不会影响是否使用索引。
  https://blog.csdn.net/qq_35275233/article/details/87888809

---

- 这里你做了那个秒杀的项目,这里使用 Redis 预减库存主要是为了做什么呢,就是它能解决什么问题
  你主要是就是它这个优化是到底是在优化什么呢它能解决什么问题呢
  使用 Redis 预减库存主要是为了做什么呢,就是它能解决什么问题
  主要目的减少对数据库的访问,可以拦截卖完了之后多余的请求，防止多个请求不断达到数据库造成压力，同时不需要考虑库存数据一致性
  实现思路：

1. 先将商品信息加载到 Redis 缓存中
2. 当收到秒杀请求时，在访问 Redis 之前先在内存标记中获取对应商品的库存数量，做到不需要对 Redis 进行访问就得到了库存，减少了高并发下的 Redis 压力，再判断 Redis 中的缓存商品数量预减并判断是否足够，不足则直接返回异常，并标记内存库存不足。
3. 否则请求入队并返回前端并进入秒杀队列，前端进行轮询判断是否秒杀成功。

---

- 秒杀的时候你是怎么解决超卖的问题
  - 追问:如果就是这种行解锁,其实对于你本身这个秒杀接口的性能有了限制，那有没有其他方案去实现解决这种超卖的问题
  - 追问直接使用 SetNx 会不会有问题
  - 追问：setnx 如何评估释放锁的时间
    watchDog
- 如何保证缓存数据的一致性
  （缓存延时双删的问题）先删除缓存后：
  当 a 先删除缓存后 B 去查询缓存，此时 a 还未跟新缓存，则 b 得到了缓存中的旧值，是否会更新缓存造成缓存中存在脏读信息，
- 如何保证下单功能和减库存事务的一致性：库存扣减成功但是订单生成失败
  使用 Spring 事务@Transactional 更新库存成功后在生成订单 或者使用 lua 脚本
- 追问：Spring 事务 如何失效何时失效
- 分布式还是单体应用
- 为什么用雪花算法
- JVM 的三色标记
- 为什么用 RabbitMQ
- RabbitMQ 如何解决消息重复和一致性问题
- 使用过什么设计模式
- 说一下责任链模式
- 查看 Linux 中的某一个进程
- 查看 Linux 中所有进程

## 卓望数码一面

- 自我介绍

- 实习项目介绍

- 介绍 list 集合

  - ArrayList 和 LinkedList 区别
  - 扩容机制 （这里答错了写成了 15）

- 事务的 ACID 属性

- Spring 中事务失效的场景（\*\*）

- 单例模式

  - 如何保持单例模式的线程安全

- ThreadLocal 存储原理和使用场景

  - 避免 ThreadLocal 避免 OOM

- 为什么我们不用 Executors 默认创建线程池的方法，而直接自己手动去调用 ThreadPoolExecutor 去创建线程池

- springboot 常见注解

  - springboot 的@SpringBootApplication 组合注解
  - springBoot 如何切换生产或者测试环境
  - spring 的 bootStrap.yml 和 application.aproties 文件加载顺序

- 微服务相关

  - 降级和熔断的区别

- Mysql 数据库的索引
  - mysql 的主键自增的原因
    为什么自增：
  - 表连接的三种方式
  - 表锁和行锁
  - 锁升级表锁的情况行
